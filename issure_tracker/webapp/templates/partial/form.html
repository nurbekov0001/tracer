{#{% csrf_token %}#}
{##}
{#{% for error in form.non_field_errors %}#}
{#   <p class="form-error">{{ error }}</p>#}
{#{% endfor %}#}
{##}
{#{% for field in form %}#}
{#   <p><label for="{{ field.id_for_label }}">{{ field.label }}</label></p>#}
{#   {% for error in field.errors %}#}
{#       <p class="form-error">{{ error }}</p>#}
{#   {% endfor %}#}
{#   <p {% if field.errors %} class="form-field-error"{% endif %}>{{ field }}</p>#}
{#    <br>#}
{#{% endfor %}#}
{#<p><input type="submit" value="{{ button_text }}"></p>#}

{% if not fields_only %}
    <form action="{{ action_url }}" method="{{ form_method }}" enctype="{{ enctype }}">
        {% csrf_token %}
{% endif %}
        {% for error in form.non_field_errors %}
            <p class="error">{{ error }}</p>
        {% endfor %}
        {% for field in form %}
            <p><label for="{{ field.id_for_label }}">{{ field.label }}</label></p>
           {% for error in field.errors %}
               <p class="form-error">{{ error }}</p>
           {% endfor %}
           <p {% if field.errors %} class="form-field-error"{% endif %}>{{ field }}</p>
            <br>
        {% endfor %}
{% if not fields_only %}
        <br/>
        <input type="submit" value="{{ button_text|default:"Submit" }}"/>
    </form>
{% endif %}